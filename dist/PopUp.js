import{x as S,j as e,y as U,a as r,A as I,l as R,U as T,i as E,s as L}from"./Utilities.js";function A(){const{bookmarkGroups:c,setBookmarkGroups:x}=r.useContext(I),[f,d]=r.useState([]),[u,s]=r.useState(""),[t,l]=r.useState(""),[m,i]=r.useState(""),[h,p]=r.useState("");r.useEffect(()=>{N(),g(),setTimeout(function(){console.log("In timeout"),window.addEventListener("blur",function(o){console.log("In window event listener"),o.preventDefault()})},500)},[]);function g(){chrome.tabs.query({active:!0,currentWindow:!0},function(o){var a=o[0];let n=a.url,y=a.title;p(n),i(y),k()})}function k(){c.length==0?s("New Group"):s(c[0].groupName)}function b(o){i(o.target.value)}function w(o){p(o.target.value)}function G(o){l(o.target.value)}function v(o){o.target.value==="New Group"&&l(""),s(o.target.value)}async function j(o){o.preventDefault();const a=t===""?u:t,n=E(h);L(m,n,a,x),C(),l(""),k(),i(""),p("")}async function N(){let a=(await R()).map(n=>e.jsx("option",{value:n.groupName,children:n.groupName},n.groupName));d(a)}function C(){t!==""&&d(o=>[...o,e.jsx("option",{value:t,children:t},t)])}return e.jsxs("div",{className:"popup",children:[e.jsx("h1",{children:"Mindful"}),e.jsxs("form",{id:"add-bookmark-form",onSubmit:j,children:[e.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),e.jsxs("select",{id:"group-dropdown",value:u,onChange:v,children:[f,e.jsx("option",{value:"New Group",children:"New Group"})]}),u==="New Group"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),e.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:t,onChange:G})]}),e.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),e.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:m,onChange:b,required:!0}),e.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),e.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:h,onChange:w,pattern:T,required:!0}),e.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}S.render(e.jsx(U,{children:e.jsx(A,{})}),document.getElementById("root"));
