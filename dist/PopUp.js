import{a4 as y,aq as S,_ as r,a8 as t,au as R,m as T,a9 as L,aa as P,ae as w,ar as A,af as B,ag as D,at as F,a6 as M}from"./useBookmarkManager.js";y.configure(S);function q(){const{bookmarkGroups:n,setBookmarkGroups:i,userId:c}=r.useContext(L),{addNamedBookmark:d}=P(),[l,u]=r.useState(""),[s,p]=r.useState(""),[g,m]=r.useState(""),[x,h]=r.useState(""),b=n.filter(e=>e.groupName!==w).map(e=>t.jsx("option",{value:e.groupName,children:e.groupName},e.id));r.useEffect(()=>{E(),N();const e=a=>{console.log("In window event listener"),a.preventDefault()},o=setTimeout(()=>{console.log("In timeout"),window.addEventListener("blur",e)},500);return()=>{clearTimeout(o),window.removeEventListener("blur",e)}},[]),r.useEffect(()=>{n&&n.length>0?u(n[0].groupName):u("New Group")},[n]);function N(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){var o=e[0];let a=o.url,f=o.title;h(a),m(f),k()})}function k(){n.length==0?u("New Group"):u(n[0].groupName)}function v(e){m(e.target.value)}function j(e){h(e.target.value)}function G(e){p(e.target.value)}function I(e){e.target.value==="New Group"&&p(""),u(e.target.value)}async function C(e){e.preventDefault();const o=s===""?l:s,a=D(x);d(g,a,o),U(),p(""),k(),m(""),h("")}async function E(){const e=await A(c);i(e)}function U(){if(s!==""){const e={id:s,groupName:s};i(o=>{const a=o.findIndex(f=>f.groupName===w);return a===-1?[...o,e]:[...o.slice(0,a),e,...o.slice(a)]})}}return t.jsxs("div",{className:"popup",children:[t.jsx("h1",{children:"Mindful"}),t.jsxs("form",{id:"add-bookmark-form",onSubmit:C,"aria-label":"Add bookmark",children:[t.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),t.jsxs("select",{id:"group-dropdown",value:l,onChange:I,children:[b,t.jsx("option",{value:"New Group",children:"New Group"})]}),l==="New Group"&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),t.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:s,onChange:G})]}),t.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),t.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:g,onChange:v,required:!0}),t.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),t.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:x,onChange:j,pattern:B,required:!0}),t.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}function _(){const[n,i]=r.useState(null),[c,d]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{const u=await T();i(u)}catch{i(null)}d(!1)})()},[]),c?t.jsx("div",{children:"Loading..."}):n?t.jsx(R,{user:n,children:t.jsx(q,{})}):t.jsx("div",{children:"Please sign in on the new tab page first."})}const O=document.getElementById("root"),V=F.createRoot(O);V.render(t.jsx(M.StrictMode,{children:t.jsx(_,{})}));
