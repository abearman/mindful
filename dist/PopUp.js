import{o as y,j as e,p as S,a,A as U,d as E,n as R,U as T,f as B}from"./useBookmarkManager.js";function L(){const{bookmarkGroups:c,setBookmarkGroups:k,userId:x}=a.useContext(U),{addNamedBookmark:f}=E(),[u,s]=a.useState(""),[t,l]=a.useState(""),[d,i]=a.useState(""),[m,p]=a.useState("");a.useEffect(()=>{N(),g(),setTimeout(function(){console.log("In timeout"),window.addEventListener("blur",function(o){console.log("In window event listener"),o.preventDefault()})},500)},[]);function g(){chrome.tabs.query({active:!0,currentWindow:!0},function(o){var r=o[0];let n=r.url,I=r.title;p(n),i(I),h()})}function h(){c.length==0?s("New Group"):s(c[0].groupName)}function b(o){i(o.target.value)}function w(o){p(o.target.value)}function G(o){l(o.target.value)}function j(o){o.target.value==="New Group"&&l(""),s(o.target.value)}async function v(o){o.preventDefault();const r=t===""?u:t,n=B(m);f(d,n,r,k),C(),l(""),h(),i(""),p("")}async function N(){let r=(await R(x)).map(n=>e.jsx("option",{value:n.groupName,children:n.groupName},n.groupName));setGroups(r)}function C(){t!==""&&setGroups(o=>[...o,e.jsx("option",{value:t,children:t},t)])}return e.jsxs("div",{className:"popup",children:[e.jsx("h1",{children:"Mindful"}),e.jsxs("form",{id:"add-bookmark-form",onSubmit:v,children:[e.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),e.jsxs("select",{id:"group-dropdown",value:u,onChange:j,children:[groups,e.jsx("option",{value:"New Group",children:"New Group"})]}),u==="New Group"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),e.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:t,onChange:G})]}),e.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),e.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:d,onChange:b,required:!0}),e.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),e.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:m,onChange:w,pattern:T,required:!0}),e.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}const A=document.getElementById("root"),D=y.createRoot(A);D.render(e.jsx(S,{children:e.jsx(L,{})}));
