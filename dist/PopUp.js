import{b as T,j as e,e as U,r,A as I,l as f,U as R,k as A,s as E,m as L}from"./AppContext.js";function B(){const{bookmarkGroups:c,setBookmarkGroups:b}=r.useContext(I),[x,d]=r.useState([]),[u,s]=r.useState(""),[o,l]=r.useState(""),[m,i]=r.useState(""),[h,p]=r.useState("");r.useEffect(()=>{C(),g(),setTimeout(function(){console.log("In timeout"),window.addEventListener("blur",function(t){console.log("In window event listener"),t.preventDefault()})},500)},[]);function g(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){var a=t[0];let n=a.url,y=a.title;p(n),i(y),k()})}function k(){c.length==0?s("New Group"):s(c[0].groupName)}function w(t){i(t.target.value)}function v(t){p(t.target.value)}function G(t){l(t.target.value)}function j(t){t.target.value==="New Group"&&l(""),s(t.target.value)}async function N(t){t.preventDefault();const a=o===""?u:o,n=A(h);E(m,n,a),b(await f()),S(),l(""),k(),i(""),p(""),L()}async function C(){let a=(await f()).map(n=>e.jsx("option",{value:n.groupName,children:n.groupName},n.groupName));d(a)}function S(){o!==""&&d(t=>[...t,e.jsx("option",{value:o,children:o},o)])}return e.jsxs("div",{className:"popup",children:[e.jsx("h1",{children:"Mindful"}),e.jsxs("form",{id:"add-bookmark-form",onSubmit:N,children:[e.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),e.jsxs("select",{id:"group-dropdown",value:u,onChange:j,children:[x,e.jsx("option",{value:"New Group",children:"New Group"})]}),u==="New Group"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),e.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:o,onChange:G})]}),e.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),e.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:m,onChange:w,required:!0}),e.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),e.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:h,onChange:v,pattern:R,required:!0}),e.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}T.render(e.jsx(U,{children:e.jsx(B,{})}),document.getElementById("root"));
