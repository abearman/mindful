import{F as I,j as e,G as U,a as r,A as E,l as R,U as T,i as L,s as A}from"./Utilities.js";function B(){const{userId:x,bookmarkGroups:c,setBookmarkGroups:f}=r.useContext(E),[g,d]=r.useState([]),[u,s]=r.useState(""),[t,l]=r.useState(""),[m,i]=r.useState(""),[h,p]=r.useState("");r.useEffect(()=>{C(),b(),setTimeout(function(){console.log("In timeout"),window.addEventListener("blur",function(o){console.log("In window event listener"),o.preventDefault()})},500)},[]);function b(){chrome.tabs.query({active:!0,currentWindow:!0},function(o){var a=o[0];let n=a.url,y=a.title;p(n),i(y),k()})}function k(){c.length==0?s("New Group"):s(c[0].groupName)}function w(o){i(o.target.value)}function G(o){p(o.target.value)}function v(o){l(o.target.value)}function j(o){o.target.value==="New Group"&&l(""),s(o.target.value)}async function N(o){o.preventDefault();const a=t===""?u:t,n=L(h);A(m,n,a,f),S(),l(""),k(),i(""),p("")}async function C(){let a=(await R(x)).map(n=>e.jsx("option",{value:n.groupName,children:n.groupName},n.groupName));d(a)}function S(){t!==""&&d(o=>[...o,e.jsx("option",{value:t,children:t},t)])}return e.jsxs("div",{className:"popup",children:[e.jsx("h1",{children:"Mindful"}),e.jsxs("form",{id:"add-bookmark-form",onSubmit:N,children:[e.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),e.jsxs("select",{id:"group-dropdown",value:u,onChange:j,children:[g,e.jsx("option",{value:"New Group",children:"New Group"})]}),u==="New Group"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),e.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:t,onChange:v})]}),e.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),e.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:m,onChange:w,required:!0}),e.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),e.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:h,onChange:G,pattern:T,required:!0}),e.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}const F=document.getElementById("root"),D=I.createRoot(F);D.render(e.jsx(U,{children:e.jsx(B,{})}));
