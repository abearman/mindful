import{a6 as U,ar as y,a0 as n,aa as t,av as S,m as R,ad as T,ae as L,af as P,as as A,ah as B,ai as D,au as F,a8 as M}from"./useBookmarkManager.js";U.configure(y);function q(){const{bookmarkGroups:o,setBookmarkGroups:s,userId:c}=n.useContext(T),{addNamedBookmark:d}=L(),[l,r]=n.useState(""),[u,p]=n.useState(""),[f,m]=n.useState(""),[g,h]=n.useState(""),x=o.filter(e=>e.groupName!==P).map(e=>t.jsx("option",{value:e.groupName,children:e.groupName},e.id));n.useEffect(()=>{C(),w();const e=i=>{console.log("In window event listener"),i.preventDefault()},a=setTimeout(()=>{console.log("In timeout"),window.addEventListener("blur",e)},500);return()=>{clearTimeout(a),window.removeEventListener("blur",e)}},[]),n.useEffect(()=>{o&&o.length>0?r(o[0].groupName):r("New Group")},[o]);function w(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){var a=e[0];let i=a.url,I=a.title;h(i),m(I),k()})}function k(){o.length==0?r("New Group"):r(o[0].groupName)}function b(e){m(e.target.value)}function N(e){h(e.target.value)}function v(e){p(e.target.value)}function j(e){e.target.value==="New Group"&&p(""),r(e.target.value)}async function G(e){e.preventDefault();const a=u===""?l:u,i=D(g);d(f,i,a),E(),p(""),k(),m(""),h("")}async function C(){const e=await A(c);s(e)}function E(){if(u!==""){const e={id:u,groupName:u};s(a=>[...a,e])}}return t.jsxs("div",{className:"popup",children:[t.jsx("h1",{children:"Mindful"}),t.jsxs("form",{id:"add-bookmark-form",onSubmit:G,"aria-label":"Add bookmark",children:[t.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),t.jsxs("select",{id:"group-dropdown",value:l,onChange:j,children:[x,t.jsx("option",{value:"New Group",children:"New Group"})]}),l==="New Group"&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),t.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:u,onChange:v})]}),t.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),t.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:f,onChange:b,required:!0}),t.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),t.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:g,onChange:N,pattern:B,required:!0}),t.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}function O(){const[o,s]=n.useState(null),[c,d]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const r=await R();s(r)}catch{s(null)}d(!1)})()},[]),c?t.jsx("div",{children:"Loading..."}):o?t.jsx(S,{user:o,children:t.jsx(q,{})}):t.jsx("div",{children:"Please sign in on the new tab page first."})}const _=document.getElementById("root"),V=F.createRoot(_);V.render(t.jsx(M.StrictMode,{children:t.jsx(O,{})}));
