import{a6 as I,ar as y,a0 as n,aa as t,av as S,m as R,ad as T,ae as L,af as P,as as A,ah as B,ai as D,au as F,a8 as M}from"./useBookmarkManager.js";I.configure(y);function q(){const{bookmarkGroups:o,setBookmarkGroups:u,userId:l}=n.useContext(T),{addNamedBookmark:c}=L(),[i,r]=n.useState(""),[s,p]=n.useState(""),[f,d]=n.useState(""),[g,m]=n.useState(""),k=o.filter(e=>e.groupName!==P).map(e=>t.jsx("option",{value:e.groupName,children:e.groupName},e.id));n.useEffect(()=>{U(),w(),setTimeout(function(){console.log("In timeout"),window.addEventListener("blur",function(e){console.log("In window event listener"),e.preventDefault()})},500)},[]),n.useEffect(()=>{o&&o.length>0?r(o[0].groupName):r("New Group")},[o]);function w(){chrome.tabs.query({active:!0,currentWindow:!0},function(e){var a=e[0];let h=a.url,E=a.title;m(h),d(E),x()})}function x(){o.length==0?r("New Group"):r(o[0].groupName)}function N(e){d(e.target.value)}function b(e){m(e.target.value)}function j(e){p(e.target.value)}function v(e){e.target.value==="New Group"&&p(""),r(e.target.value)}async function G(e){e.preventDefault();const a=s===""?i:s,h=D(g);c(f,h,a),C(),p(""),x(),d(""),m("")}async function U(){const e=await A(l);u(e)}function C(){if(s!==""){const e={groupName:s};u(a=>[...a,e])}}return t.jsxs("div",{className:"popup",children:[t.jsx("h1",{children:"Mindful"}),t.jsxs("form",{id:"add-bookmark-form",onSubmit:G,children:[t.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),t.jsxs("select",{id:"group-dropdown",value:i,onChange:v,children:[k,t.jsx("option",{value:"New Group",children:"New Group"})]}),i==="New Group"&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),t.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:s,onChange:j})]}),t.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),t.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:f,onChange:N,required:!0}),t.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),t.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:g,onChange:b,pattern:B,required:!0}),t.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}function O(){const[o,u]=n.useState(null),[l,c]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const r=await R();console.log("authenticatedUser in popup: ",r),u(r)}catch{u(null)}c(!1)})()},[]),l?t.jsx("div",{children:"Loading..."}):(console.log("user to render? ",o),o?t.jsx(S,{user:o,children:t.jsx(q,{})}):t.jsx("div",{children:"Please sign in on the new tab page first."}))}const _=document.getElementById("root"),V=F.createRoot(_);V.render(t.jsx(M.StrictMode,{children:t.jsx(O,{})}));
