import{b as U,j as e,e as y,r as n,A as I,l as f,U as R,k as A,s as E,m as L}from"./AppContext.js";function B(){const{bookmarkGroups:c,setBookmarkGroups:b}=n.useContext(I),[x,d]=n.useState([]),[a,s]=n.useState(""),[t,l]=n.useState(""),[m,i]=n.useState(""),[h,p]=n.useState("");n.useEffect(()=>{C(),g(),setTimeout(function(){console.log("In timeout"),window.addEventListener("blur",function(o){console.log("In window event listener"),o.preventDefault()})},500)},[]);function g(){chrome.tabs.query({active:!0,currentWindow:!0},function(o){var u=o[0];let r=u.url,T=u.title;p(r),i(T),k()})}function k(){c.length==0?s("New Group"):s(c[0].groupName)}function v(o){i(o.target.value)}function w(o){p(o.target.value)}function G(o){l(o.target.value)}function j(o){o.target.value==="New Group"&&l(""),s(o.target.value)}async function N(o){o.preventDefault();const u=t===""?a:t,r=A(h);E(m,r,u),b(f()),S(),l(""),k(),i(""),p(""),L()}function C(){let u=f().map(r=>e.jsx("option",{value:r.groupName,children:r.groupName},r.groupName));d(u)}function S(){t!==""&&d(o=>[...o,e.jsx("option",{value:t,children:t},t)])}return e.jsxs("div",{className:"popup",children:[e.jsx("h1",{children:"Mindful"}),e.jsxs("form",{id:"add-bookmark-form",onSubmit:N,children:[e.jsx("label",{htmlFor:"group-dropdown",children:"Group"}),e.jsxs("select",{id:"group-dropdown",value:a,onChange:j,children:[x,e.jsx("option",{value:"New Group",children:"New Group"})]}),a==="New Group"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-group-input",children:"New Group"}),e.jsx("input",{type:"text",id:"new-group-input",name:"new-group-input",value:t,onChange:G})]}),e.jsx("label",{htmlFor:"bookmark-name",children:"Name"}),e.jsx("input",{type:"text",id:"bookmark-name",name:"bookmark-name",value:m,onChange:v,required:!0}),e.jsx("label",{htmlFor:"bookmark-url",children:"URL"}),e.jsx("input",{type:"text",id:"bookmark-url",name:"bookmark-url",value:h,onChange:w,pattern:R,required:!0}),e.jsx("button",{type:"submit",className:"add-bookmark-button",children:"Add Bookmark"})]})]})}U.render(e.jsx(y,{children:e.jsx(B,{})}),document.getElementById("root"));
